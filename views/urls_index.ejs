<!DOCTYPE html>

<html lang="en">
<head>
</head>
<body>
<header>
  <a href = "/urls">
    <h2 style="color: blue; font-family: sans-serif; font-weight: 300;">TinyApp</h2>
  </a>
  <% include ./partials/_header %>
</header>

  <!-- This checks if the user has an existing account -->

  <% if (user === undefined) { %>
    <p>Please <a href = "/login">login</a></p>
  <% } %>

  <!-- Loop to check if the URL belongs to the logged in user-->

  <% for(var key in urls) { %>
    <% if (user.id === urls[key].createdBy) { %>

    <ul style="list-style-type:none;">
    <li>
      <%= key %>: <a href = "<%= urls[key].longURL %>"><%= urls[key].longURL %></a>
        <form method="POST" action="/urls/<%= key %>/delete">
          <input style = "padding: 10px" type="submit" value="Delete">
        </form>
      <a href="/urls/<%= key %>"><button type ="submit">Edit</button></a>
    </li>
    </ul>
    <% } else { %>

  <!-- If user is not the owner of the URL, no edit or delete buttons -->

    <ul style="list-style-type:none;">
      <li>
        <%= key %>: <a href = "<%= urls[key].longURL %>"><%= urls[key].longURL %></a>
      </li>
    </ul>

    <% } %>
  <% } %>

  <br>
  <p style = "font-family: sans-serif; font-weight: 300;">
  <a href = "urls/new">Shorten a new URL</a>
  </p>

</body>
</html>